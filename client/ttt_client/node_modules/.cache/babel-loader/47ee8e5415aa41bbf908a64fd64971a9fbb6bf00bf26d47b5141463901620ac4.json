{"ast":null,"code":"import React, { useEffect } from 'react';\nimport { MessageInputFlat } from './MessageInputFlat';\nimport { useMessageComposer } from './hooks';\nimport { useCooldownTimer } from './hooks/useCooldownTimer';\nimport { useCreateMessageInputContext } from './hooks/useCreateMessageInputContext';\nimport { useMessageInputControls } from './hooks/useMessageInputControls';\nimport { useComponentContext } from '../../context/ComponentContext';\nimport { MessageInputContextProvider } from '../../context/MessageInputContext';\nimport { DialogManagerProvider } from '../../context';\nimport { useRegisterDropHandlers } from './WithDragAndDropUpload';\nconst MessageInputProvider = props => {\n  const cooldownTimerState = useCooldownTimer();\n  const messageInputUiApi = useMessageInputControls(props);\n  const {\n    emojiSearchIndex\n  } = useComponentContext('MessageInput');\n  const messageInputContextValue = useCreateMessageInputContext({\n    ...cooldownTimerState,\n    ...messageInputUiApi,\n    ...props,\n    emojiSearchIndex: props.emojiSearchIndex ?? emojiSearchIndex\n  });\n  const messageComposer = useMessageComposer();\n  useEffect(() => () => {\n    messageComposer.createDraft();\n  }, [messageComposer]);\n  useEffect(() => {\n    const threadId = messageComposer.threadId;\n    if (!threadId || !messageComposer.channel || !messageComposer.compositionIsEmpty) return;\n    // get draft data for legacy thead composer\n    messageComposer.channel.getDraft({\n      parent_id: threadId\n    }).then(({\n      draft\n    }) => {\n      if (draft) {\n        messageComposer.initState({\n          composition: draft\n        });\n      }\n    });\n  }, [messageComposer]);\n  useRegisterDropHandlers();\n  return React.createElement(MessageInputContextProvider, {\n    value: messageInputContextValue\n  }, props.children);\n};\nconst UnMemoizedMessageInput = props => {\n  const {\n    Input: PropInput\n  } = props;\n  const {\n    Input: ContextInput\n  } = useComponentContext('MessageInput');\n  const Input = PropInput || ContextInput || MessageInputFlat;\n  const dialogManagerId = props.isThreadInput ? 'message-input-dialog-manager-thread' : 'message-input-dialog-manager';\n  return React.createElement(DialogManagerProvider, {\n    id: dialogManagerId\n  }, React.createElement(MessageInputProvider, {\n    ...props\n  }, React.createElement(Input, null)));\n};\n/**\n * A high level component that has provides all functionality to the Input it renders.\n */\nexport const MessageInput = React.memo(UnMemoizedMessageInput);","map":{"version":3,"names":["React","useEffect","MessageInputFlat","useMessageComposer","useCooldownTimer","useCreateMessageInputContext","useMessageInputControls","useComponentContext","MessageInputContextProvider","DialogManagerProvider","useRegisterDropHandlers","MessageInputProvider","props","cooldownTimerState","messageInputUiApi","emojiSearchIndex","messageInputContextValue","messageComposer","createDraft","threadId","channel","compositionIsEmpty","getDraft","parent_id","then","draft","initState","composition","createElement","value","children","UnMemoizedMessageInput","Input","PropInput","ContextInput","dialogManagerId","isThreadInput","id","MessageInput","memo"],"sources":["C:/Users/benny/node_modules/stream-chat-react/dist/components/MessageInput/MessageInput.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { MessageInputFlat } from './MessageInputFlat';\nimport { useMessageComposer } from './hooks';\nimport { useCooldownTimer } from './hooks/useCooldownTimer';\nimport { useCreateMessageInputContext } from './hooks/useCreateMessageInputContext';\nimport { useMessageInputControls } from './hooks/useMessageInputControls';\nimport { useComponentContext } from '../../context/ComponentContext';\nimport { MessageInputContextProvider } from '../../context/MessageInputContext';\nimport { DialogManagerProvider } from '../../context';\nimport { useRegisterDropHandlers } from './WithDragAndDropUpload';\nconst MessageInputProvider = (props) => {\n    const cooldownTimerState = useCooldownTimer();\n    const messageInputUiApi = useMessageInputControls(props);\n    const { emojiSearchIndex } = useComponentContext('MessageInput');\n    const messageInputContextValue = useCreateMessageInputContext({\n        ...cooldownTimerState,\n        ...messageInputUiApi,\n        ...props,\n        emojiSearchIndex: props.emojiSearchIndex ?? emojiSearchIndex,\n    });\n    const messageComposer = useMessageComposer();\n    useEffect(() => () => {\n        messageComposer.createDraft();\n    }, [messageComposer]);\n    useEffect(() => {\n        const threadId = messageComposer.threadId;\n        if (!threadId || !messageComposer.channel || !messageComposer.compositionIsEmpty)\n            return;\n        // get draft data for legacy thead composer\n        messageComposer.channel.getDraft({ parent_id: threadId }).then(({ draft }) => {\n            if (draft) {\n                messageComposer.initState({ composition: draft });\n            }\n        });\n    }, [messageComposer]);\n    useRegisterDropHandlers();\n    return (React.createElement(MessageInputContextProvider, { value: messageInputContextValue }, props.children));\n};\nconst UnMemoizedMessageInput = (props) => {\n    const { Input: PropInput } = props;\n    const { Input: ContextInput } = useComponentContext('MessageInput');\n    const Input = PropInput || ContextInput || MessageInputFlat;\n    const dialogManagerId = props.isThreadInput\n        ? 'message-input-dialog-manager-thread'\n        : 'message-input-dialog-manager';\n    return (React.createElement(DialogManagerProvider, { id: dialogManagerId },\n        React.createElement(MessageInputProvider, { ...props },\n            React.createElement(Input, null))));\n};\n/**\n * A high level component that has provides all functionality to the Input it renders.\n */\nexport const MessageInput = React.memo(UnMemoizedMessageInput);\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,gBAAgB,QAAQ,oBAAoB;AACrD,SAASC,kBAAkB,QAAQ,SAAS;AAC5C,SAASC,gBAAgB,QAAQ,0BAA0B;AAC3D,SAASC,4BAA4B,QAAQ,sCAAsC;AACnF,SAASC,uBAAuB,QAAQ,iCAAiC;AACzE,SAASC,mBAAmB,QAAQ,gCAAgC;AACpE,SAASC,2BAA2B,QAAQ,mCAAmC;AAC/E,SAASC,qBAAqB,QAAQ,eAAe;AACrD,SAASC,uBAAuB,QAAQ,yBAAyB;AACjE,MAAMC,oBAAoB,GAAIC,KAAK,IAAK;EACpC,MAAMC,kBAAkB,GAAGT,gBAAgB,CAAC,CAAC;EAC7C,MAAMU,iBAAiB,GAAGR,uBAAuB,CAACM,KAAK,CAAC;EACxD,MAAM;IAAEG;EAAiB,CAAC,GAAGR,mBAAmB,CAAC,cAAc,CAAC;EAChE,MAAMS,wBAAwB,GAAGX,4BAA4B,CAAC;IAC1D,GAAGQ,kBAAkB;IACrB,GAAGC,iBAAiB;IACpB,GAAGF,KAAK;IACRG,gBAAgB,EAAEH,KAAK,CAACG,gBAAgB,IAAIA;EAChD,CAAC,CAAC;EACF,MAAME,eAAe,GAAGd,kBAAkB,CAAC,CAAC;EAC5CF,SAAS,CAAC,MAAM,MAAM;IAClBgB,eAAe,CAACC,WAAW,CAAC,CAAC;EACjC,CAAC,EAAE,CAACD,eAAe,CAAC,CAAC;EACrBhB,SAAS,CAAC,MAAM;IACZ,MAAMkB,QAAQ,GAAGF,eAAe,CAACE,QAAQ;IACzC,IAAI,CAACA,QAAQ,IAAI,CAACF,eAAe,CAACG,OAAO,IAAI,CAACH,eAAe,CAACI,kBAAkB,EAC5E;IACJ;IACAJ,eAAe,CAACG,OAAO,CAACE,QAAQ,CAAC;MAAEC,SAAS,EAAEJ;IAAS,CAAC,CAAC,CAACK,IAAI,CAAC,CAAC;MAAEC;IAAM,CAAC,KAAK;MAC1E,IAAIA,KAAK,EAAE;QACPR,eAAe,CAACS,SAAS,CAAC;UAAEC,WAAW,EAAEF;QAAM,CAAC,CAAC;MACrD;IACJ,CAAC,CAAC;EACN,CAAC,EAAE,CAACR,eAAe,CAAC,CAAC;EACrBP,uBAAuB,CAAC,CAAC;EACzB,OAAQV,KAAK,CAAC4B,aAAa,CAACpB,2BAA2B,EAAE;IAAEqB,KAAK,EAAEb;EAAyB,CAAC,EAAEJ,KAAK,CAACkB,QAAQ,CAAC;AACjH,CAAC;AACD,MAAMC,sBAAsB,GAAInB,KAAK,IAAK;EACtC,MAAM;IAAEoB,KAAK,EAAEC;EAAU,CAAC,GAAGrB,KAAK;EAClC,MAAM;IAAEoB,KAAK,EAAEE;EAAa,CAAC,GAAG3B,mBAAmB,CAAC,cAAc,CAAC;EACnE,MAAMyB,KAAK,GAAGC,SAAS,IAAIC,YAAY,IAAIhC,gBAAgB;EAC3D,MAAMiC,eAAe,GAAGvB,KAAK,CAACwB,aAAa,GACrC,qCAAqC,GACrC,8BAA8B;EACpC,OAAQpC,KAAK,CAAC4B,aAAa,CAACnB,qBAAqB,EAAE;IAAE4B,EAAE,EAAEF;EAAgB,CAAC,EACtEnC,KAAK,CAAC4B,aAAa,CAACjB,oBAAoB,EAAE;IAAE,GAAGC;EAAM,CAAC,EAClDZ,KAAK,CAAC4B,aAAa,CAACI,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;AAC9C,CAAC;AACD;AACA;AACA;AACA,OAAO,MAAMM,YAAY,GAAGtC,KAAK,CAACuC,IAAI,CAACR,sBAAsB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
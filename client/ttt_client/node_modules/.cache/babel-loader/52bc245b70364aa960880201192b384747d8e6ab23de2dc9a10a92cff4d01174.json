{"ast":null,"code":"import React, { useCallback, useMemo } from 'react';\nimport { useActionHandler, useDeleteHandler, useUserRole } from './hooks';\nimport { MessageDeleted as DefaultMessageDeleted } from './MessageDeleted';\nimport { MessageTimestamp } from './MessageTimestamp';\nimport { getMessageActions } from './utils';\nimport { Avatar } from '../Avatar';\nimport { Gallery } from '../Gallery';\nimport { MessageActions } from '../MessageActions';\nimport { MML } from '../MML';\nimport { useChatContext } from '../../context/ChatContext';\nimport { useComponentContext } from '../../context/ComponentContext';\nimport { useMessageContext } from '../../context/MessageContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\nimport { renderText } from './renderText';\nconst selectColor = (number, dark) => {\n  const hue = number * 137.508; // use golden angle approximation\n  return `hsl(${hue},${dark ? '50%' : '85%'}, ${dark ? '75%' : '55%'})`;\n};\nconst hashUserId = userId => {\n  const hash = userId.split('').reduce((acc, c) => {\n    acc = (acc << 5) - acc + c.charCodeAt(0);\n    return acc & acc;\n  }, 0);\n  return Math.abs(hash) / 10 ** Math.ceil(Math.log10(Math.abs(hash) + 1));\n};\nconst getUserColor = (theme, userId) => selectColor(hashUserId(userId), theme.includes('dark'));\nconst UnMemoizedFixedHeightMessage = props => {\n  const {\n    groupedByUser: propGroupedByUser,\n    message: propMessage\n  } = props;\n  const {\n    theme\n  } = useChatContext('FixedHeightMessage');\n  const {\n    groupedByUser: contextGroupedByUser,\n    message: contextMessage\n  } = useMessageContext('FixedHeightMessage');\n  const {\n    MessageDeleted = DefaultMessageDeleted\n  } = useComponentContext('FixedHeightMessage');\n  const {\n    userLanguage\n  } = useTranslationContext('FixedHeightMessage');\n  const groupedByUser = propGroupedByUser !== undefined ? propGroupedByUser : contextGroupedByUser;\n  const message = propMessage || contextMessage;\n  const handleAction = useActionHandler(message);\n  const handleDelete = useDeleteHandler(message);\n  const role = useUserRole(message);\n  const messageTextToRender = message?.i18n?.[`${userLanguage}_text`] || message?.text;\n  const renderedText = useMemo(() => renderText(messageTextToRender, message.mentioned_users), [message.mentioned_users, messageTextToRender]);\n  const userId = message.user?.id || '';\n  const userColor = useMemo(() => getUserColor(theme, userId), [userId, theme]);\n  const messageActionsHandler = useCallback(() => getMessageActions(['delete'], {\n    canDelete: role.canDelete\n  }), [role]);\n  const images = message?.attachments?.filter(({\n    type\n  }) => type === 'image');\n  return React.createElement(\"div\", {\n    className: `str-chat__virtual-message__wrapper ${role.isMyMessage ? 'str-chat__virtual-message__wrapper--me' : ''} ${groupedByUser ? 'str-chat__virtual-message__wrapper--group' : ''}`,\n    key: message.id\n  }, message.user && React.createElement(Avatar, {\n    image: message.user.image,\n    name: message.user.name || message.user.id,\n    user: message.user\n  }), React.createElement(\"div\", {\n    className: 'str-chat__virtual-message__content'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__virtual-message__meta'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__virtual-message__author',\n    style: {\n      color: userColor\n    }\n  }, React.createElement(\"strong\", null, message.user?.name || 'unknown'))), message.deleted_at || message.type === 'deleted' ? React.createElement(MessageDeleted, {\n    message: message\n  }) : React.createElement(React.Fragment, null, images && React.createElement(Gallery, {\n    images: images\n  }), React.createElement(\"div\", {\n    className: 'str-chat__virtual-message__text',\n    \"data-testid\": 'msg-text'\n  }, renderedText, message.mml && React.createElement(MML, {\n    actionHandler: handleAction,\n    align: 'left',\n    source: message.mml\n  }), React.createElement(\"div\", {\n    className: 'str-chat__virtual-message__data'\n  }, React.createElement(MessageActions, {\n    customWrapperClass: 'str-chat__virtual-message__actions',\n    getMessageActions: messageActionsHandler,\n    handleDelete: handleDelete,\n    message: message,\n    mine: () => role.isMyMessage\n  }), React.createElement(\"span\", {\n    className: 'str-chat__virtual-message__date'\n  }, React.createElement(MessageTimestamp, {\n    customClass: 'str-chat__message-simple-timestamp',\n    message: message\n  })))))));\n};\n/**\n * @deprecated - This UI component will be removed in the next major release.\n *\n * FixedHeightMessage - This component renders a single message.\n * It uses fixed height elements to make sure it works well in VirtualizedMessageList\n */\nexport const FixedHeightMessage = React.memo(UnMemoizedFixedHeightMessage);","map":{"version":3,"names":["React","useCallback","useMemo","useActionHandler","useDeleteHandler","useUserRole","MessageDeleted","DefaultMessageDeleted","MessageTimestamp","getMessageActions","Avatar","Gallery","MessageActions","MML","useChatContext","useComponentContext","useMessageContext","useTranslationContext","renderText","selectColor","number","dark","hue","hashUserId","userId","hash","split","reduce","acc","c","charCodeAt","Math","abs","ceil","log10","getUserColor","theme","includes","UnMemoizedFixedHeightMessage","props","groupedByUser","propGroupedByUser","message","propMessage","contextGroupedByUser","contextMessage","userLanguage","undefined","handleAction","handleDelete","role","messageTextToRender","i18n","text","renderedText","mentioned_users","user","id","userColor","messageActionsHandler","canDelete","images","attachments","filter","type","createElement","className","isMyMessage","key","image","name","style","color","deleted_at","Fragment","mml","actionHandler","align","source","customWrapperClass","mine","customClass","FixedHeightMessage","memo"],"sources":["C:/Users/benny/node_modules/stream-chat-react/dist/components/Message/FixedHeightMessage.js"],"sourcesContent":["import React, { useCallback, useMemo } from 'react';\nimport { useActionHandler, useDeleteHandler, useUserRole } from './hooks';\nimport { MessageDeleted as DefaultMessageDeleted } from './MessageDeleted';\nimport { MessageTimestamp } from './MessageTimestamp';\nimport { getMessageActions } from './utils';\nimport { Avatar } from '../Avatar';\nimport { Gallery } from '../Gallery';\nimport { MessageActions } from '../MessageActions';\nimport { MML } from '../MML';\nimport { useChatContext } from '../../context/ChatContext';\nimport { useComponentContext } from '../../context/ComponentContext';\nimport { useMessageContext } from '../../context/MessageContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\nimport { renderText } from './renderText';\nconst selectColor = (number, dark) => {\n    const hue = number * 137.508; // use golden angle approximation\n    return `hsl(${hue},${dark ? '50%' : '85%'}, ${dark ? '75%' : '55%'})`;\n};\nconst hashUserId = (userId) => {\n    const hash = userId.split('').reduce((acc, c) => {\n        acc = (acc << 5) - acc + c.charCodeAt(0);\n        return acc & acc;\n    }, 0);\n    return Math.abs(hash) / 10 ** Math.ceil(Math.log10(Math.abs(hash) + 1));\n};\nconst getUserColor = (theme, userId) => selectColor(hashUserId(userId), theme.includes('dark'));\nconst UnMemoizedFixedHeightMessage = (props) => {\n    const { groupedByUser: propGroupedByUser, message: propMessage } = props;\n    const { theme } = useChatContext('FixedHeightMessage');\n    const { groupedByUser: contextGroupedByUser, message: contextMessage } = useMessageContext('FixedHeightMessage');\n    const { MessageDeleted = DefaultMessageDeleted } = useComponentContext('FixedHeightMessage');\n    const { userLanguage } = useTranslationContext('FixedHeightMessage');\n    const groupedByUser = propGroupedByUser !== undefined ? propGroupedByUser : contextGroupedByUser;\n    const message = propMessage || contextMessage;\n    const handleAction = useActionHandler(message);\n    const handleDelete = useDeleteHandler(message);\n    const role = useUserRole(message);\n    const messageTextToRender = message?.i18n?.[`${userLanguage}_text`] ||\n        message?.text;\n    const renderedText = useMemo(() => renderText(messageTextToRender, message.mentioned_users), [message.mentioned_users, messageTextToRender]);\n    const userId = message.user?.id || '';\n    const userColor = useMemo(() => getUserColor(theme, userId), [userId, theme]);\n    const messageActionsHandler = useCallback(() => getMessageActions(['delete'], { canDelete: role.canDelete }), [role]);\n    const images = message?.attachments?.filter(({ type }) => type === 'image');\n    return (React.createElement(\"div\", { className: `str-chat__virtual-message__wrapper ${role.isMyMessage ? 'str-chat__virtual-message__wrapper--me' : ''} ${groupedByUser ? 'str-chat__virtual-message__wrapper--group' : ''}`, key: message.id },\n        message.user && (React.createElement(Avatar, { image: message.user.image, name: message.user.name || message.user.id, user: message.user })),\n        React.createElement(\"div\", { className: 'str-chat__virtual-message__content' },\n            React.createElement(\"div\", { className: 'str-chat__virtual-message__meta' },\n                React.createElement(\"div\", { className: 'str-chat__virtual-message__author', style: { color: userColor } },\n                    React.createElement(\"strong\", null, message.user?.name || 'unknown'))),\n            message.deleted_at || message.type === 'deleted' ? (React.createElement(MessageDeleted, { message: message })) : (React.createElement(React.Fragment, null,\n                images && React.createElement(Gallery, { images: images }),\n                React.createElement(\"div\", { className: 'str-chat__virtual-message__text', \"data-testid\": 'msg-text' },\n                    renderedText,\n                    message.mml && (React.createElement(MML, { actionHandler: handleAction, align: 'left', source: message.mml })),\n                    React.createElement(\"div\", { className: 'str-chat__virtual-message__data' },\n                        React.createElement(MessageActions, { customWrapperClass: 'str-chat__virtual-message__actions', getMessageActions: messageActionsHandler, handleDelete: handleDelete, message: message, mine: () => role.isMyMessage }),\n                        React.createElement(\"span\", { className: 'str-chat__virtual-message__date' },\n                            React.createElement(MessageTimestamp, { customClass: 'str-chat__message-simple-timestamp', message: message })))))))));\n};\n/**\n * @deprecated - This UI component will be removed in the next major release.\n *\n * FixedHeightMessage - This component renders a single message.\n * It uses fixed height elements to make sure it works well in VirtualizedMessageList\n */\nexport const FixedHeightMessage = React.memo(UnMemoizedFixedHeightMessage);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}